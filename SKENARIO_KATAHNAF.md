# ðŸ“‹ Skenario Test: Kat Ahnaf - November 2025

## ðŸ‘¤ Data Karyawan

**Nama:** Kat Ahnaf  
**Email:** katahnaf@gmail.com  
**Mulai Kerja:** 6 November 2025  
**Periode Tidak Bekerja:** 28 Oktober - 5 November (9 hari)

---

## ðŸ’° Komponen Gaji

| Komponen | Nominal |
|----------|---------|
| **Gaji Pokok** | Rp 1.750.000 |
| **Tunjangan Makan** | Rp 15.000/hari |
| **Tunjangan Transport** | Rp 15.000/hari |
| **Tunjangan Jabatan** | Rp 0 |
| **Overwork** | Rp 50.000/hari |

---

## ðŸ“… Jadwal Shift

**Pola Kerja:** Senin - Jumat  
**Shift:**
- **Senin-Rabu:** Shift Pagi (08:00 - 16:00)
- **Kamis-Jumat:** Shift Siang (13:00 - 21:00)
- **Sabtu-Minggu:** Libur

---

## ðŸ“Š Detail Kehadiran November 2025

### âœ… Kehadiran Normal (dengan absensi)
| Tanggal | Hari | Shift | Status | Keterangan |
|---------|------|-------|--------|------------|
| 9 Nov | Sabtu | - | Libur | - |
| 13 Nov | Rabu | Pagi | Hadir | Normal |
| 14 Nov | Kamis | Siang | Hadir | Normal |
| 16 Nov | Sabtu | - | Libur | - |
| 17 Nov | Minggu | - | Libur | - |
| 19 Nov | Selasa | Pagi | Hadir | Normal |
| 22 Nov | Jumat | Siang | Hadir | Normal |
| 25 Nov | Senin | Pagi | Hadir | Normal |
| 26 Nov | Selasa | Pagi | Hadir | Normal |
| 27 Nov | Rabu | Pagi | Hadir | Normal |
| 28 Nov | Kamis | Siang | Hadir | Normal |
| 29 Nov | Jumat | Siang | Hadir | Normal |

**Total: 12 hari hadir dengan absensi tercatat**

---

### âš ï¸ Lupa Absen (Bekerja tapi tidak tercatat)
| Tanggal | Hari | Shift | Keterangan |
|---------|------|-------|------------|
| 6 Nov | Kamis | Pagi | Hari pertama, belum paham sistem |
| 7 Nov | Jumat | Pagi | Masih belajar sistem |
| 10 Nov | Minggu | Pagi | Reschedule dari tgl 8, lupa absen |

**Total: 3 hari lupa absen**  
**Konsekuensi:** Dianggap tidak hadir (potongan Rp 50.000/hari)

---

### ðŸ”„ Reschedule
- **Tanggal 8 November (Sabtu):** Tidak masuk, dijadwalkan ulang
- **Pindah ke:** 10 November (Minggu)
- **Status:** Kerja di tgl 10, tapi lupa absen

---

### â° Overwork
| Tanggal | Hari | Shift | Keterangan |
|---------|------|-------|------------|
| 11 Nov | Senin | Siang | Gantikan Galih Ganji |
| 12 Nov | Selasa | Siang | Gantikan Galih Ganji |
| 23 Nov | Sabtu | Pagi | Gantikan Dot Pikir |
| 24 Nov | Minggu | Pagi | Gantikan Dot Pikir |

**Total: 4 hari overwork**  
**Bonus:** Rp 50.000 Ã— 4 = **Rp 200.000**

---

### ðŸ“ Izin (Approved)
| Tanggal | Hari | Alasan | Status |
|---------|------|--------|--------|
| 15 Nov | Jumat | Keperluan keluarga | âœ… Diterima |

**Konsekuensi:** Tidak kena potongan (izin approved)

---

### ðŸ¤’ Sakit (Approved)
| Tanggal | Hari | Alasan | Status |
|---------|------|--------|--------|
| 18 Nov | Senin | Demam dan flu | âœ… Diterima |

**Konsekuensi:** Tidak kena potongan (sakit approved)

---

### âŒ Alpha (Tidak Hadir Tanpa Konfirmasi)
| Tanggal | Hari | Shift | Keterangan |
|---------|------|-------|------------|
| 20 Nov | Rabu | Pagi | Tidak hadir, tidak ada keterangan |
| 21 Nov | Kamis | Siang | Tidak hadir, tidak ada keterangan |

**Total: 2 hari alpha**  
**Potongan:** Rp 50.000 Ã— 2 = **Rp 100.000**

---

## ðŸ’¸ Komponen Tambahan

### Potongan
| Item | Nominal |
|------|---------|
| **Kasbon** | Rp 26.000 |
| **Piutang Toko** | Rp 35.000 |
| **Total Potongan Tambahan** | **Rp 61.000** |

### Bonus
| Item | Nominal |
|------|---------|
| **Insentif Toko** | Rp 200.000 |
| **Bonus Marketing** | Rp 100.000 |
| **Total Bonus** | **Rp 300.000** |

---

## ðŸ§® Perhitungan Gaji (Estimasi)

### Pendapatan

1. **Gaji Pokok (Prorata)**
   - Gaji penuh: Rp 1.750.000
   - Hari kerja periode (28 Okt - 27 Nov): 31 hari
   - Hari tidak bekerja (28 Okt - 5 Nov): 9 hari
   - Hari kerja efektif: 22 hari
   - **Gaji pokok prorata:** Rp 1.750.000 Ã— (22/31) = **Rp 1.241.935**

2. **Tunjangan Makan**
   - Rate: Rp 15.000/hari
   - Hari hadir efektif: 12 + 4 (overwork) = 16 hari
   - Catatan: 3 hari lupa absen tidak dihitung
   - **Total:** Rp 15.000 Ã— 16 = **Rp 240.000**

3. **Tunjangan Transport**
   - Rate: Rp 15.000/hari
   - Hari hadir efektif: 16 hari
   - **Total:** Rp 15.000 Ã— 16 = **Rp 240.000**

4. **Overwork**
   - Rate: Rp 50.000/hari
   - Hari overwork: 4 hari
   - **Total:** Rp 50.000 Ã— 4 = **Rp 200.000**

5. **Insentif Toko**
   - **Total:** **Rp 200.000**

6. **Bonus Marketing**
   - **Total:** **Rp 100.000**

**Total Pendapatan:** Rp 2.221.935

---

### Potongan

1. **Lupa Absen (Dianggap Tidak Hadir)**
   - Tanggal: 6, 7, 10 November
   - Rate potongan: Rp 50.000/hari
   - **Total:** Rp 50.000 Ã— 3 = **Rp 150.000**

2. **Alpha (Tidak Hadir)**
   - Tanggal: 20, 21 November
   - Rate potongan: Rp 50.000/hari
   - **Total:** Rp 50.000 Ã— 2 = **Rp 100.000**

3. **Kasbon**
   - **Total:** **Rp 26.000**

4. **Piutang Toko**
   - **Total:** **Rp 35.000**

**Total Potongan:** Rp 311.000

---

### Gaji Bersih

```
Total Pendapatan:  Rp 2.221.935
Total Potongan:    Rp   311.000
-----------------------------------
Gaji Bersih:       Rp 1.910.935
```

---

## ðŸ“ Catatan Penting

### 1. Logika Potongan Gaji Awal
- Kat Ahnaf mulai kerja tanggal **6 November 2025**
- Periode gaji: **28 Oktober - 27 November** (31 hari)
- Tidak bekerja: **28 Oktober - 5 November** (9 hari)
- Gaji pokok, tunjangan makan, dan transport **dipotong prorata** untuk 9 hari tidak bekerja

### 2. Lupa Absen vs Alpha
- **Lupa Absen (6, 7, 10 Nov):** Sebenarnya bekerja, tapi karena tidak ada record absensi, sistem menghitung sebagai tidak hadir â†’ **Potongan Rp 50.000/hari**
- **Alpha (20, 21 Nov):** Memang tidak hadir tanpa keterangan â†’ **Potongan Rp 50.000/hari**
- Kedua kasus ini sama-sama kena potongan, tapi asal masalahnya berbeda

### 3. Izin & Sakit (Approved)
- **Izin (15 Nov):** Approved, tidak kena potongan
- **Sakit (18 Nov):** Approved, tidak kena potongan
- Keduanya tetap punya shift assignment, tapi tidak wajib absen

### 4. Overwork
- **Tgl 11-12:** Menggantikan Galih Ganji di shift siang
- **Tgl 23-24:** Menggantikan Dot Pikir
- Total 4 hari overwork Ã— Rp 50.000 = **Rp 200.000 bonus**

### 5. Reschedule
- **Tgl 8 â†’ Tgl 10:** Shift dipindah dari Sabtu ke Minggu
- Tgl 8: Tidak ada absensi (memang tidak kerja)
- Tgl 10: Seharusnya kerja, tapi lupa absen â†’ Kena potongan

---

## ðŸš€ Implementasi

### File yang Dibuat:
1. **skenario_katahnaf.php** - Script untuk setup data
2. **SKENARIO_KATAHNAF.md** - Dokumentasi lengkap (file ini)

### Cara Jalankan:
```
http://localhost/aplikasi/skenario_katahnaf.php
```

### Yang Sudah Dibuat:
- âœ… Update komponen gaji
- âœ… Buat jadwal shift 
- âœ… Buat data absensi
- âœ… Buat pengajuan izin & sakit

### Yang Perlu Ditambahkan Manual:
Komponen tambahan (kasbon, piutang, insentif, bonus) perlu ditambahkan ke slip gaji secara manual atau melalui sistem yang mendukung custom components.

---

## ðŸ” Verifikasi

### Check Data di Database:

1. **Komponen Gaji:**
```sql
SELECT * FROM komponen_gaji WHERE register_id = [USER_ID];
```

2. **Shift Assignments:**
```sql
SELECT * FROM shift_assignments 
WHERE user_id = [USER_ID] 
AND tanggal_shift >= '2025-11-01' 
ORDER BY tanggal_shift;
```

3. **Absensi:**
```sql
SELECT * FROM absensi 
WHERE user_id = [USER_ID] 
AND tanggal_absensi >= '2025-11-01' 
ORDER BY tanggal_absensi;
```

4. **Pengajuan Izin:**
```sql
SELECT * FROM pengajuan_izin 
WHERE user_id = [USER_ID] 
AND tanggal_mulai >= '2025-11-01';
```

---

## ðŸ“Š Expected Results

Setelah menjalankan `auto_generate_slipgaji.php`, slip gaji Kat Ahnaf untuk November 2025 harus menunjukkan:

- âœ… Gaji pokok prorata (dipotong 9 hari)
- âœ… Tunjangan dipotong sesuai hari hadir efektif
- âœ… Bonus overwork 4 hari
- âœ… Potongan untuk 3 hari lupa absen
- âœ… Potongan untuk 2 hari alpha
- âœ… Tidak ada potongan untuk izin & sakit (approved)

**Perlu ditambahkan manual:**
- Kasbon: Rp 26.000
- Piutang Toko: Rp 35.000
- Insentif Toko: Rp 200.000
- Bonus Marketing: Rp 100.000

---

**Created:** November 6, 2025  
**Test Case:** Complex Scenario - New Employee  
**Status:** âœ… Data Created, Ready for Verification
