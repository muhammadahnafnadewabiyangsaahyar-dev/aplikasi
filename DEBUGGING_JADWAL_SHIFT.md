# ğŸ” Debugging Guide: Jadwal Shift Calendar Not Showing

## Langkah-langkah Debugging:

### 1. Buka Browser Developer Tools (F12)

### 2. Check Console untuk Error
Buka tab Console dan cari pesan error:
- âŒ **ReferenceError**: shiftsData is not defined
- âŒ **TypeError**: Cannot read property 'getElementById' of null
- âŒ **SyntaxError**: Unexpected token

### 3. Check Console Logs
Anda seharusnya melihat log berikut:
```
ğŸ”§ Initializing shiftsData...
ğŸ“¦ shiftsData loaded: {...}
ğŸ“Š Total shifts: X
ğŸ“œ Loading script_jadwal_shift.js...
ğŸš€ DOM Loaded
ğŸ“Š Shifts Data: {...}
ğŸ“… Current Month/Year: 10 2025
âœ… Required elements found
ğŸ“… Generating calendar for: November 2025
ğŸ“Š Calendar info: {daysInMonth: 30, startDay: 4, ...}
âœ… Calendar generated successfully
âœ“ Script Jadwal Shift loaded successfully!
```

### 4. Check Network Tab
Pastikan file-file ini berhasil dimuat (status 200):
- âœ… jadwal_shift.php
- âœ… style.css
- âœ… style_jadwal_shift.css
- âœ… script_jadwal_shift.js

### 5. Check Elements Tab
Cari element ini:
```html
<tbody id="calendar-body">
```
Pastikan ada isi (bukan kosong atau hanya "<!-- Generated by JavaScript -->")

### 6. Test dengan File Test
Buka file: `http://localhost/aplikasi/test_jadwal_shift.html`

Jika test file berhasil menampilkan kalender, maka masalah ada di:
- PHP session/authentication
- Database query
- Navbar include

### 7. Kemungkinan Masalah & Solusi

#### Problem 1: shiftsData Undefined
**Symptom:** Console error "shiftsData is not defined"
**Solution:** 
- Check apakah PHP berhasil execute
- View page source, cari `const shiftsData =`
- Pastikan JSON valid

#### Problem 2: Calendar Body Kosong
**Symptom:** Element ada tapi tidak ada <tr>
**Solution:**
- Check console untuk error di generateCalendar()
- Pastikan loop berjalan (check daysInMonth value)

#### Problem 3: CSS Override
**Symptom:** Element ada tapi tidak terlihat
**Solution:**
```css
/* Check di Inspect Element */
#calendar-body { display: table-row-group !important; }
.calendar-table { display: table !important; }
```

#### Problem 4: Script Not Loading
**Symptom:** Tidak ada console log sama sekali
**Solution:**
- Hard refresh (Ctrl+Shift+R)
- Check file path script_jadwal_shift.js
- Check syntax error di JavaScript

### 8. Manual Check Database

Login ke phpMyAdmin dan run query:
```sql
SELECT sa.*, c.nama_cabang, c.nama_shift, c.jam_masuk, c.jam_keluar
FROM shift_assignments sa
JOIN cabang c ON sa.cabang_id = c.id
WHERE sa.user_id = YOUR_USER_ID
AND sa.tanggal_shift BETWEEN CURDATE() AND DATE_ADD(CURDATE(), INTERVAL 1 MONTH);
```

Jika hasil kosong, berarti:
- User belum di-assign shift oleh admin
- Perlu setup data di shift_management.php dulu

### 9. Quick Fix Commands

Clear all caches:
```bash
# Stop XAMPP
sudo /Applications/XAMPP/xamppfiles/xampp stop

# Clear PHP cache
rm -rf /Applications/XAMPP/xamppfiles/temp/*

# Restart XAMPP
sudo /Applications/XAMPP/xamppfiles/xampp start
```

Browser hard refresh:
- Chrome/Firefox: `Cmd + Shift + R` (Mac) or `Ctrl + Shift + R` (Windows)
- Safari: `Cmd + Option + E` then `Cmd + R`

### 10. Emergency Fallback

Jika masih tidak muncul, coba tambahkan ini di jadwal_shift.php sebelum `</body>`:

```html
<script>
// Emergency calendar renderer
if (!document.getElementById('calendar-body').innerHTML.trim()) {
    console.error('âŒ Calendar not generated! Generating emergency fallback...');
    const tbody = document.getElementById('calendar-body');
    tbody.innerHTML = '<tr><td colspan="7" style="text-align:center;padding:20px;color:red;">âš ï¸ Calendar failed to load. Check console for errors.</td></tr>';
}
</script>
```

### 11. Contact Support Info

Jika semua cara di atas tidak berhasil, kirimkan informasi berikut:
1. Screenshot console (F12)
2. Screenshot network tab
3. PHP error log: `/Applications/XAMPP/xamppfiles/logs/php_error_log`
4. Output dari: `SELECT * FROM shift_assignments WHERE user_id = X`

---

## Expected Behavior

âœ… **Normal:**
- Calendar grid dengan 7 kolom (Min-Sab)
- 4-6 row tanggal
- Shift info di dalam cell jika ada shift
- Button prev/next berfungsi
- Modal muncul saat klik detail

âŒ **Abnormal:**
- Calendar kosong/blank
- Hanya header tanpa body
- Error di console
- 404 not found untuk JS/CSS

---

**Last Updated:** 2025-11-05  
**Version:** 1.0
